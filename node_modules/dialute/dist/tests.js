"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const dialog_1 = require("./dialog");
const server_1 = require("./server");
function* script(r, ctx) {
    const rsp = r.buildRsp();
    while (true) {
        rsp.msg = r.msg;
        rsp.kbrd = ['1', '2', '3'];
        // yield r.nlu.lemmaIntersection(['привет', 'салют', 'дело']).toString();
        yield rsp;
        ctx.num = 2;
        yield a;
    }
}
function* a(r) {
    yield 'Hello from a';
    yield 'Hello from a 2';
    yield b;
}
function* b(r, ctx) {
    const { num } = ctx;
    yield `Hello from b, num is ${num}`;
    yield 'Hello from b 2';
    yield script(r, ctx);
}
const dm = new dialog_1.DialogManager(script);
dm.newHook(dialog_1.Event.CreateSession, (s) => tslib_1.__awaiter(void 0, void 0, void 0, function* () { return console.log('New session!', s.request.userId); }));
const d = new server_1.Dialute({ dm, port: '8000' });
// const d = Dialute.fromEntrypoint(script as GeneratorFunction)
d.start();
//# sourceMappingURL=tests.js.map